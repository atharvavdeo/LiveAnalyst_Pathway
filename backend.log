/Users/atharvadeo/Desktop/PROF/Hackies/PathwayDatathon IITKGP/path/LiveSocialAnalyst/app_pathway.py:89: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
INFO:     Started server process [39673]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
âœ… SQLite Database initialized at /Users/atharvadeo/Desktop/PROF/Hackies/PathwayDatathon IITKGP/path/LiveSocialAnalyst/data/news_archive.db
==================================================
ğŸš€ LiveSocialAnalyst - Hybrid Architecture (DB + Live)
==================================================
ğŸ“¡ Starting stream: newsapi
ğŸ“¡ Starting stream: gnews
ğŸ“¡ Starting stream: hackernews
ğŸ“¡ Starting stream: reddit
âš ï¸ Reddit credentials missing or placeholder. Streaming disabled.
ğŸ“¡ Starting stream: firecrawl
ğŸ“¡ Starting stream: opml
ğŸ”„ Refreshing source lists from 5 OPML files...
âœ… All streams active (including OPML Nuclear Ingestion)
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
ğŸ’¾ gnews: Saved 9 items to DB
ğŸŒ GNews: Fetched 10 articles
âœ… Loaded 217 active feeds.
ğŸš€ OPML: Starting to parse 217 RSS feeds...
ğŸ“° OPML: Yielded 10 items so far...
ğŸ“° OPML: Yielded 20 items so far...
ğŸ“° OPML: Yielded 30 items so far...
âœ… HackerNews: Fetched 20 stories
ğŸ“° OPML: Yielded 40 items so far...
ğŸ“° OPML: Yielded 50 items so far...
INFO:     127.0.0.1:59917 - "OPTIONS /fetch_news HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:59918 - "GET /data HTTP/1.1" 200 OK
ğŸ“° OPML: Yielded 60 items so far...
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:59917 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“° OPML: Yielded 70 items so far...
ğŸ“° OPML: Yielded 80 items so far...
ğŸ“° OPML: Yielded 90 items so far...
INFO:     127.0.0.1:59949 - "GET /data HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:59951 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:59950 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“° OPML: Yielded 100 items so far...
ğŸ“° OPML: Yielded 110 items so far...
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:59964 - "GET /data HTTP/1.1" 200 OK
INFO:     127.0.0.1:59965 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:59963 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: fun
ğŸ“° NewsAPI Fetch: 'fun'
ğŸ‰ Fetching FUN stream via Everything endpoint...
ğŸ“° NewsAPI Search Fallback: 'weird news OR viral OR funny OR space OR pop culture'
âœ… NewsAPI found 10 items for 'weird news OR viral OR funny OR space OR pop culture'
ğŸ’¾ Persisted 0 items from category 'fun'
INFO:     127.0.0.1:59964 - "POST /fetch_news HTTP/1.1" 200 OK
INFO:     127.0.0.1:59964 - "OPTIONS /query HTTP/1.1" 200 OK
ğŸ” Received Query: Shark tank
ğŸ“š DB History matches: 4
ğŸŒ GNews Historical Search: 'Shark tank' (Last 1000 days)
âœ… Found 0 historical articles.
âš ï¸ GNews empty, trying NewsAPI Fallback...
ğŸ“° NewsAPI Search Fallback: 'Shark tank'
âœ… NewsAPI found 10 items for 'Shark tank'
ğŸ”¥ Firecrawl Targeted Scrape: 'Shark tank'
âŒ Firecrawl Scrape Error: {"error":"Insufficient credits"}
ğŸ’¾ Persisted 0 new on-demand items
ğŸ§  Processing 190 items for AI...
ğŸ“Š Freshness filter: 190 â†’ 149 items
ğŸ” Keyword matches: 6 items
ğŸ“¦ Final hybrid context: 16 items
âŒ Gemini Error: 404 models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
ğŸ”„ Gemini failed, trying Groq fallback...
INFO:     127.0.0.1:59964 - "POST /query HTTP/1.1" 200 OK
ğŸ”„ API: Manual OPML Refresh Requested
âš¡ OPML: Manual refresh triggered!
INFO:     127.0.0.1:59980 - "POST /refresh_opml HTTP/1.1" 200 OK
âš¡ OPML: Restarting feed cycle immediately...
âœ… OPML: Completed cycle, yielded 113 new items. Sleeping 10s...
INFO:     127.0.0.1:59980 - "GET /data HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:59991 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:59990 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“° OPML: Yielded 10 items so far...
ğŸ“° OPML: Yielded 20 items so far...
ğŸ“° OPML: Yielded 30 items so far...
INFO:     127.0.0.1:60026 - "GET /data HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:60028 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:60027 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“° OPML: Yielded 40 items so far...
âœ… HackerNews: Fetched 20 stories
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:60056 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:60055 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“° OPML: Yielded 50 items so far...
ğŸ“° OPML: Yielded 60 items so far...
ğŸ“° OPML: Yielded 70 items so far...
ğŸ“° OPML: Yielded 80 items so far...
ğŸ“° OPML: Yielded 90 items so far...
INFO:     127.0.0.1:60100 - "GET /data HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:60102 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:60101 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“° OPML: Yielded 100 items so far...
ğŸ“° OPML: Yielded 110 items so far...
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:60145 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:60144 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“° OPML: Yielded 120 items so far...
INFO:     127.0.0.1:60199 - "GET /data HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:60201 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:60200 - "POST /fetch_news HTTP/1.1" 200 OK
âœ… HackerNews: Fetched 20 stories
ğŸ“° OPML: Yielded 130 items so far...
ğŸ“¥ Fetching news for category: business
ğŸ“° NewsAPI Fetch: 'business'
INFO:     127.0.0.1:60240 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'business'.
ğŸ’¾ Persisted 0 items from category 'business'
INFO:     127.0.0.1:60239 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ”„ API: Manual OPML Refresh Requested
âš¡ OPML: Manual refresh triggered!
INFO:     127.0.0.1:60240 - "POST /refresh_opml HTTP/1.1" 200 OK
âš¡ OPML: Restarting feed cycle immediately...
âœ… OPML: Completed cycle, yielded 134 new items. Sleeping 10s...
INFO:     127.0.0.1:60240 - "GET /data HTTP/1.1" 200 OK
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
ğŸ“° OPML: Yielded 10 items so far...
âœ… HackerNews: Fetched 20 stories
ğŸ’¾ opml: Saved 1 items to DB
ğŸ“° OPML: Yielded 20 items so far...
âœ… HackerNews: Fetched 20 stories
ğŸ’¾ gnews: Saved 1 items to DB
ğŸŒ GNews: Fetched 10 articles
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
âœ… HackerNews: Fetched 20 stories
ğŸ“° OPML: Yielded 30 items so far...
ğŸ’¾ opml: Saved 3 items to DB
âœ… OPML: Completed cycle, yielded 34 new items. Sleeping 10s...
âœ… HackerNews: Fetched 20 stories
ğŸ’¾ hackernews: Saved 1 items to DB
âœ… HackerNews: Fetched 20 stories
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
ğŸ’¾ opml: Saved 1 items to DB
ğŸ’¾ opml: Saved 2 items to DB
ğŸ’¾ hackernews: Saved 1 items to DB
âœ… HackerNews: Fetched 20 stories
ğŸ’¾ opml: Saved 2 items to DB
âœ… HackerNews: Fetched 20 stories
ğŸ’¾ gnews: Saved 10 items to DB
ğŸŒ GNews: Fetched 10 articles
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
ğŸ’¾ hackernews: Saved 3 items to DB
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
ğŸ’¾ gnews: Saved 10 items to DB
ğŸŒ GNews: Fetched 9 articles
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
ğŸ’¾ gnews: Saved 9 items to DB
ğŸŒ GNews: Fetched 10 articles
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
ğŸ’¾ gnews: Saved 10 items to DB
ğŸŒ GNews: Fetched 7 articles
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
âœ… HackerNews: Fetched 20 stories
âœ… HackerNews: Fetched 20 stories
INFO:     127.0.0.1:61440 - "OPTIONS /fetch_news HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: politics
ğŸ“° NewsAPI Fetch: 'politics'
INFO:     127.0.0.1:61441 - "GET /data HTTP/1.1" 200 OK
INFO:     127.0.0.1:61442 - "GET /data HTTP/1.1" 200 OK
âœ… Found 0 articles for category 'politics'.
INFO:     127.0.0.1:61440 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: fun
ğŸ“° NewsAPI Fetch: 'fun'
ğŸ‰ Fetching FUN stream via Everything endpoint...
ğŸ“° NewsAPI Search Fallback: 'weird news OR viral OR funny OR space OR pop culture'
âœ… NewsAPI found 10 items for 'weird news OR viral OR funny OR space OR pop culture'
ğŸ’¾ Persisted 0 items from category 'fun'
INFO:     127.0.0.1:61441 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ”„ API: Manual OPML Refresh Requested
âš¡ OPML: Manual refresh triggered!
INFO:     127.0.0.1:61449 - "POST /refresh_opml HTTP/1.1" 200 OK
INFO:     127.0.0.1:61449 - "GET /data HTTP/1.1" 200 OK
INFO:     127.0.0.1:61455 - "OPTIONS /query HTTP/1.1" 200 OK
ğŸ” Received Query: kash patel
ğŸ“š DB History matches: 1
ğŸŒ GNews Historical Search: 'kash patel' (Last 1000 days)
âœ… Found 3 historical articles.
ğŸ”¥ Firecrawl Targeted Scrape: 'kash patel'
ğŸ“¥ Fetching news for category: politics
ğŸ“° NewsAPI Fetch: 'politics'
INFO:     127.0.0.1:61459 - "GET /data HTTP/1.1" 200 OK
âŒ Firecrawl Scrape Error: {"error":"Insufficient credits"}
ğŸ’¾ Persisted 3 new on-demand items
ğŸ§  Processing 313 items for AI...
ğŸ“Š Freshness filter: 313 â†’ 22 items
ğŸ” Keyword matches: 3 items
ğŸ“¦ Final hybrid context: 13 items
âœ… Found 0 articles for category 'politics'.
INFO:     127.0.0.1:61458 - "POST /fetch_news HTTP/1.1" 200 OK
âŒ Gemini Error: 404 models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
ğŸ”„ Gemini failed, trying Groq fallback...
INFO:     127.0.0.1:61455 - "POST /query HTTP/1.1" 200 OK
INFO:     127.0.0.1:61470 - "GET /data HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: politics
ğŸ“° NewsAPI Fetch: 'politics'
INFO:     127.0.0.1:61472 - "GET /data HTTP/1.1" 200 OK
âœ… Found 0 articles for category 'politics'.
INFO:     127.0.0.1:61471 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ’¾ gnews: Saved 7 items to DB
ğŸŒ GNews: Fetched 10 articles
âŒ Firecrawl Error 402: {"error":"Insufficient credits"}
ğŸ“¥ Fetching news for category: technology
ğŸ“° NewsAPI Fetch: 'technology'
INFO:     127.0.0.1:61481 - "GET /data HTTP/1.1" 200 OK
INFO:     127.0.0.1:61482 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'technology'.
ğŸ’¾ Persisted 0 items from category 'technology'
INFO:     127.0.0.1:61480 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: fun
ğŸ“° NewsAPI Fetch: 'fun'
ğŸ‰ Fetching FUN stream via Everything endpoint...
ğŸ“° NewsAPI Search Fallback: 'weird news OR viral OR funny OR space OR pop culture'
âœ… NewsAPI found 10 items for 'weird news OR viral OR funny OR space OR pop culture'
ğŸ’¾ Persisted 0 items from category 'fun'
INFO:     127.0.0.1:61481 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ“¥ Fetching news for category: politics
ğŸ“° NewsAPI Fetch: 'politics'
âœ… Found 0 articles for category 'politics'.
INFO:     127.0.0.1:61491 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ’¾ hackernews: Saved 2 items to DB
âœ… HackerNews: Fetched 20 stories
ğŸ“¥ Fetching news for category: technology
ğŸ“° NewsAPI Fetch: 'technology'
INFO:     127.0.0.1:61504 - "GET /data HTTP/1.1" 200 OK
âœ… Found 20 articles for category 'technology'.
ğŸ’¾ Persisted 0 items from category 'technology'
INFO:     127.0.0.1:61503 - "POST /fetch_news HTTP/1.1" 200 OK
ğŸ”„ API: Manual OPML Refresh Requested
âš¡ OPML: Manual refresh triggered!
INFO:     127.0.0.1:61512 - "POST /refresh_opml HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [39673]
